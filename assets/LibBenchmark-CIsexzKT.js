import{_ as j,d as P,r as U,g as F,o as L,c as N,e as I,B as J}from"./index-CSm0vgaC.js";function R(_){return new Worker(""+new URL("/smol-string/assets/worker-CNAKJfKh-ClexkxG2.js",import.meta.url).href,{type:"module",name:_?.name})}const C=new R;let k=0;const S={};C.onmessage=function(_){const u=_.data.id;S[u](_.data.data),delete S[u]};async function B(_){const u=k++;return new Promise(y=>{S[u]=y,C.postMessage({command:"compress",id:u,data:_})})}async function V(_){const u=k++;return new Promise(y=>{S[u]=y,C.postMessage({command:"decompress",id:u,data:_})})}var Z=function(){var _=String.fromCharCode,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",A={};function w(t,o){if(!A[t]){A[t]={};for(var a=0;a<t.length;a++)A[t][t.charAt(a)]=a}return A[t][o]}var d={compressToBase64:function(t){if(t==null)return"";var o=d._compress(t,6,function(a){return u.charAt(a)});switch(o.length%4){default:case 0:return o;case 1:return o+"===";case 2:return o+"==";case 3:return o+"="}},decompressFromBase64:function(t){return t==null?"":t==""?null:d._decompress(t.length,32,function(o){return w(u,t.charAt(o))})},compressToUTF16:function(t){return t==null?"":d._compress(t,15,function(o){return _(o+32)})+" "},decompressFromUTF16:function(t){return t==null?"":t==""?null:d._decompress(t.length,16384,function(o){return t.charCodeAt(o)-32})},compressToUint8Array:function(t){for(var o=d.compress(t),a=new Uint8Array(2*o.length),s=0,n=o.length;s<n;s++){var c=o.charCodeAt(s);a[2*s]=c>>>8,a[2*s+1]=c%256}return a},decompressFromUint8Array:function(t){if(t==null)return d.decompress(t);for(var o=new Array(t.length/2),a=0,s=o.length;a<s;a++)o[a]=256*t[2*a]+t[2*a+1];var n=[];return o.forEach(function(c){n.push(_(c))}),d.decompress(n.join(""))},compressToEncodedURIComponent:function(t){return t==null?"":d._compress(t,6,function(o){return y.charAt(o)})},decompressFromEncodedURIComponent:function(t){return t==null?"":t==""?null:(t=t.replace(/ /g,"+"),d._decompress(t.length,32,function(o){return w(y,t.charAt(o))}))},compress:function(t){return d._compress(t,16,function(o){return _(o)})},_compress:function(t,o,a){if(t==null)return"";var s,n,c,l={},f={},i="",v="",p="",g=2,O=3,m=2,h=[],r=0,e=0;for(c=0;c<t.length;c+=1)if(i=t.charAt(c),Object.prototype.hasOwnProperty.call(l,i)||(l[i]=O++,f[i]=!0),v=p+i,Object.prototype.hasOwnProperty.call(l,v))p=v;else{if(Object.prototype.hasOwnProperty.call(f,p)){if(p.charCodeAt(0)<256){for(s=0;s<m;s++)r<<=1,e==o-1?(e=0,h.push(a(r)),r=0):e++;for(n=p.charCodeAt(0),s=0;s<8;s++)r=r<<1|1&n,e==o-1?(e=0,h.push(a(r)),r=0):e++,n>>=1}else{for(n=1,s=0;s<m;s++)r=r<<1|n,e==o-1?(e=0,h.push(a(r)),r=0):e++,n=0;for(n=p.charCodeAt(0),s=0;s<16;s++)r=r<<1|1&n,e==o-1?(e=0,h.push(a(r)),r=0):e++,n>>=1}--g==0&&(g=Math.pow(2,m),m++),delete f[p]}else for(n=l[p],s=0;s<m;s++)r=r<<1|1&n,e==o-1?(e=0,h.push(a(r)),r=0):e++,n>>=1;--g==0&&(g=Math.pow(2,m),m++),l[v]=O++,p=String(i)}if(p!==""){if(Object.prototype.hasOwnProperty.call(f,p)){if(p.charCodeAt(0)<256){for(s=0;s<m;s++)r<<=1,e==o-1?(e=0,h.push(a(r)),r=0):e++;for(n=p.charCodeAt(0),s=0;s<8;s++)r=r<<1|1&n,e==o-1?(e=0,h.push(a(r)),r=0):e++,n>>=1}else{for(n=1,s=0;s<m;s++)r=r<<1|n,e==o-1?(e=0,h.push(a(r)),r=0):e++,n=0;for(n=p.charCodeAt(0),s=0;s<16;s++)r=r<<1|1&n,e==o-1?(e=0,h.push(a(r)),r=0):e++,n>>=1}--g==0&&(g=Math.pow(2,m),m++),delete f[p]}else for(n=l[p],s=0;s<m;s++)r=r<<1|1&n,e==o-1?(e=0,h.push(a(r)),r=0):e++,n>>=1;--g==0&&(g=Math.pow(2,m),m++)}for(n=2,s=0;s<m;s++)r=r<<1|1&n,e==o-1?(e=0,h.push(a(r)),r=0):e++,n>>=1;for(;;){if(r<<=1,e==o-1){h.push(a(r));break}e++}return h.join("")},decompress:function(t){return t==null?"":t==""?null:d._decompress(t.length,32768,function(o){return t.charCodeAt(o)})},_decompress:function(t,o,a){var s,n,c,l,f,i,v,p=[],g=4,O=4,m=3,h="",r=[],e={val:a(0),position:o,index:1};for(s=0;s<3;s+=1)p[s]=s;for(c=0,f=Math.pow(2,2),i=1;i!=f;)l=e.val&e.position,e.position>>=1,e.position==0&&(e.position=o,e.val=a(e.index++)),c|=(l>0?1:0)*i,i<<=1;switch(c){case 0:for(c=0,f=Math.pow(2,8),i=1;i!=f;)l=e.val&e.position,e.position>>=1,e.position==0&&(e.position=o,e.val=a(e.index++)),c|=(l>0?1:0)*i,i<<=1;v=_(c);break;case 1:for(c=0,f=Math.pow(2,16),i=1;i!=f;)l=e.val&e.position,e.position>>=1,e.position==0&&(e.position=o,e.val=a(e.index++)),c|=(l>0?1:0)*i,i<<=1;v=_(c);break;case 2:return""}for(p[3]=v,n=v,r.push(v);;){if(e.index>t)return"";for(c=0,f=Math.pow(2,m),i=1;i!=f;)l=e.val&e.position,e.position>>=1,e.position==0&&(e.position=o,e.val=a(e.index++)),c|=(l>0?1:0)*i,i<<=1;switch(v=c){case 0:for(c=0,f=Math.pow(2,8),i=1;i!=f;)l=e.val&e.position,e.position>>=1,e.position==0&&(e.position=o,e.val=a(e.index++)),c|=(l>0?1:0)*i,i<<=1;p[O++]=_(c),v=O-1,g--;break;case 1:for(c=0,f=Math.pow(2,16),i=1;i!=f;)l=e.val&e.position,e.position>>=1,e.position==0&&(e.position=o,e.val=a(e.index++)),c|=(l>0?1:0)*i,i<<=1;p[O++]=_(c),v=O-1,g--;break;case 2:return r.join("")}if(g==0&&(g=Math.pow(2,m),m++),p[v])h=p[v];else{if(v!==O)return null;h=n+n.charAt(0)}r.push(h),p[O++]=n+h.charAt(0),n=h,--g==0&&(g=Math.pow(2,m),m++)}}};return d}();const b=Z,M=j(()=>import("./512KB-Cmx0pFrj.js"),[]),T=j(()=>import("./1MB-DNCdY0QL.js"),[]),x=j(()=>import("./rw_medium-B8IwR0iT.js"),[]),E=j(()=>import("./rw_large-DP7720Ef.js"),[]);JSON.stringify(await M),JSON.stringify(await T),JSON.stringify(await x),JSON.stringify(await E);const D=P({__name:"LibBenchmark",setup(_){const u=U({compressed:{},decompressed:{},success:{},size:{}});async function y(A,w,d,t,o){const a=performance.now(),s=await t(d),n=performance.now()-a;localStorage.setItem("compressed",s);const c=localStorage.getItem("compressed");localStorage.removeItem("compressed");const l=performance.now(),f=await o(c),i=performance.now()-l;u.value.compressed[w]||(u.value.compressed[w]={},u.value.decompressed[w]={},u.value.success[w]={},u.value.size[w]={}),u.value.compressed[w][A]=n,u.value.size[w][A]=100*(s.length/d.length),u.value.decompressed[w][A]=i,u.value.success[w][A]=d===f}return F(async()=>{const A=[{name:"json_512kb",input:JSON.stringify((await M).default)},{name:"json_1mb",input:JSON.stringify((await T).default)},{name:"json_4mb",input:JSON.stringify((await x).default)},{name:"json_8mb",input:JSON.stringify((await E).default)}];for(const{name:w,input:d}of A)await y("smol-string",w,d,B,V),await y("LZString",w,d,b.compress,b.decompress),await y("LZString UTF-16",w,d,b.compressToUTF16,b.decompressFromUTF16)}),(A,w)=>(L(),N("div",null,[I(J,{results:u.value},null,8,["results"])]))}});export{D as default};
